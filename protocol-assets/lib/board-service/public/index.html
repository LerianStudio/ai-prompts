<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Management System</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen bg-zinc-50 font-sans antialiased">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Main Content -->
        <main class="flex-1 p-6">
            <div class="container mx-auto max-w-7xl">
                <!-- Dashboard View -->
                <div id="dashboardView" class="view active">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-full">
                        <!-- Pending Column -->
                        <div class="flex flex-col rounded-lg border border-zinc-200 bg-white shadow-sm" id="pendingColumn">
                            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                                <h2 class="text-lg font-semibold tracking-tight text-amber-600">Pending</h2>
                                <span class="inline-flex items-center justify-center w-6 h-6 text-xs font-medium text-zinc-500 bg-zinc-100 rounded-full" id="pendingCount">0</span>
                            </div>
                            <div class="flex-1 p-6 space-y-3 min-h-[500px] overflow-y-auto" id="pendingTasks">
                                <!-- Task cards will be inserted here -->
                            </div>
                        </div>
                        
                        <!-- In Progress Column -->
                        <div class="flex flex-col rounded-lg border border-zinc-200 bg-white shadow-sm" id="inProgressColumn">
                            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                                <h2 class="text-lg font-semibold tracking-tight text-blue-600">In Progress</h2>
                                <span class="inline-flex items-center justify-center w-6 h-6 text-xs font-medium text-zinc-500 bg-zinc-100 rounded-full" id="inProgressCount">0</span>
                            </div>
                            <div class="flex-1 p-6 space-y-3 min-h-[500px] overflow-y-auto" id="inProgressTasks">
                                <!-- Task cards will be inserted here -->
                            </div>
                        </div>
                        
                        <!-- Completed Column -->
                        <div class="flex flex-col rounded-lg border border-zinc-200 bg-white shadow-sm" id="completedColumn">
                            <div class="flex items-center justify-between p-6 border-b border-zinc-200">
                                <h2 class="text-lg font-semibold tracking-tight text-emerald-600">Completed</h2>
                                <span class="inline-flex items-center justify-center w-6 h-6 text-xs font-medium text-zinc-500 bg-zinc-100 rounded-full" id="completedCount">0</span>
                            </div>
                            <div class="flex-1 p-6 space-y-3 min-h-[500px] overflow-y-auto" id="completedTasks">
                                <!-- Task cards will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Task Detail View -->
                <div id="taskDetailView" class="view hidden">
                    <div class="max-w-4xl mx-auto">
                        <!-- Detail Header -->
                        <div class="flex items-center justify-between mb-8 p-6 rounded-lg border border-zinc-200 bg-white shadow-sm">
                            <button class="inline-flex items-center gap-2 text-sm font-medium text-zinc-600 hover:text-zinc-900 transition-colors" id="backToBoard">
                                <span class="text-lg">←</span>
                                Back to Board
                            </button>
                            <div class="flex items-center gap-3">
                                <label for="taskStatus" class="text-sm font-medium text-zinc-700">Status:</label>
                                <select id="taskStatus" class="flex h-10 w-full items-center justify-between rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
                                    <option value="pending">Pending</option>
                                    <option value="in_progress">In Progress</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Detail Content -->
                        <div class="rounded-lg border border-zinc-200 bg-white shadow-sm">
                            <div class="p-8">
                                <h1 id="taskTitle" class="text-3xl font-bold tracking-tight text-zinc-900 mb-4"></h1>
                                <p id="taskDescription" class="text-zinc-600 mb-8 leading-relaxed"></p>
                                
                                <!-- Meta Information -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-6 rounded-lg bg-zinc-50 mb-8">
                                    <div class="space-y-1">
                                        <span class="text-xs font-medium uppercase tracking-wide text-zinc-500">Created</span>
                                        <div id="taskCreated" class="text-sm font-medium text-zinc-900"></div>
                                    </div>
                                    <div class="space-y-1">
                                        <span class="text-xs font-medium uppercase tracking-wide text-zinc-500">Updated</span>
                                        <div id="taskUpdated" class="text-sm font-medium text-zinc-900"></div>
                                    </div>
                                </div>
                                
                                <!-- Tasks Section -->
                                <div class="space-y-6">
                                    <h2 class="text-xl font-semibold tracking-tight text-zinc-900">Tasks</h2>
                                    <div id="todosList" class="space-y-2">
                                        <!-- Todo items will be inserted here -->
                                    </div>
                                    
                                    <!-- Progress Bar -->
                                    <div class="space-y-2">
                                        <div class="w-full bg-zinc-200 rounded-full h-2 overflow-hidden">
                                            <div id="progressFill" class="h-full bg-gradient-to-r from-zinc-600 to-emerald-500 rounded-full transition-all duration-300" style="width: 0%"></div>
                                        </div>
                                        <p id="progressText" class="text-sm text-zinc-600 text-center">0 of 0 completed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Task Modal -->
    <div id="createTaskModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0">
        <div class="fixed inset-0" id="modalBackdrop"></div>
        <div class="relative grid w-full max-w-lg gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-200 sm:rounded-lg md:w-full animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]">
            <!-- Modal Header -->
            <div class="flex flex-col space-y-1.5 text-center sm:text-left">
                <h2 class="text-lg font-semibold leading-none tracking-tight">Create New Task</h2>
                <p class="text-sm text-zinc-500">Add a new task to your board with details and subtasks.</p>
                <button class="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-500" id="closeModal">
                    <span class="sr-only">Close</span>
                    <span class="h-4 w-4 text-xl leading-none">×</span>
                </button>
            </div>
            
            <!-- Modal Content -->
            <form id="createTaskForm" class="space-y-6">
                <div class="grid gap-4 py-4">
                    <div class="space-y-2">
                        <label for="taskTitleInput" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Title</label>
                        <input type="text" id="taskTitleInput" required 
                               class="flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" 
                               placeholder="Enter task title...">
                    </div>
                    <div class="space-y-2">
                        <label for="taskDescriptionInput" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Description</label>
                        <textarea id="taskDescriptionInput" rows="3" 
                                  class="flex min-h-[80px] w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" 
                                  placeholder="Enter task description..."></textarea>
                    </div>
                    <div class="space-y-2">
                        <label for="todosInput" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Tasks (one per line)</label>
                        <textarea id="todosInput" rows="5" 
                                  class="flex min-h-[120px] w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" 
                                  placeholder="Enter individual tasks, one per line..."></textarea>
                    </div>
                </div>
                
                <!-- Modal Footer -->
                <div class="flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2">
                    <button type="button" 
                            class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-zinc-200 bg-white hover:bg-zinc-50 hover:text-zinc-900 h-10 px-4 py-2 mt-2 sm:mt-0" 
                            id="cancelTask">Cancel</button>
                    <button type="submit" 
                            class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 h-10 px-4 py-2">Create Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="fixed inset-0 z-[100] hidden items-center justify-center bg-white/80 backdrop-blur-sm">
        <div class="flex items-center space-x-2">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-zinc-900"></div>
            <span class="text-sm font-medium text-zinc-600">Loading...</span>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>